%% Test if matlab produces the same result
mex downScaler.c

%%

%Input
Y = uint8([ 25, 64, 240, 40 , 16, 250, 0, 42
       125, 164, 240, 140 , 16, 250, 3, 12
       25, 164, 20, 40 , 16, 250, 0, 4
       25, 14, 140, 50 , 16, 205, 234, 44
       57, 82, 34, 90, 65, 90, 44, 22
       89, 92, 0, 71, 61, 78, 109, 100
       0, 124, 78, 56, 29, 0, 4, 8
       4, 7, 56, 12, 49, 7, 2, 0 ]);

Cb = uint8([ 240, 40 , 16, 7
       164, 240, 16, 7
       16, 16, 16, 7
       7, 35, 79, 5 ]);
   
Cr = uint8([ 40, 140 , 16, 7
       135, 40 , 16, 6
       16, 16, 16, 5
       8, 54, 21, 4 ]);
   
%Expected output
Yo = uint8([ 79 101 53 34; 59 71 44 31; 26 26 9 10; 15 21 3 0 ]);
Cbo = uint8([119 14; 32 18]);
Cro = uint8([49 17; 24 11]);

s = uint32(size(Y)./2);

%% Calculate output
[y, u, v] = downScaler(Y, s, Cb, s./2, Cr, s./2);

disp(y==Yo);
disp(u==Cbo);
disp(v==Cro);